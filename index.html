<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CODEON â€“ HTML & CSS Mastery</title>

<!-- Monaco Editor -->
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js"></script>
<!-- QR Code -->
<script src="https://cdn.jsdelivr.net/npm/qrious/dist/qrious.min.js"></script>
<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{margin:0;font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:white;transition:0.3s;}
header{background:#111;padding:20px;text-align:center;}
header h1{margin:0;font-size:2em;}
button{padding:10px 20px;background:gold;color:black;border:none;border-radius:6px;font-weight:bold;cursor:pointer;margin-top:10px;transition:0.3s;}
button:hover{background:orange;}
.editor-container{height:300px;width:100%;border-radius:6px;margin-top:10px;}
iframe{width:100%;height:250px;border:1px solid black;margin-top:10px;border-radius:6px;}
.card{background:rgba(255,255,255,0.08);padding:20px;border-radius:12px;margin:20px;transition:0.3s;}
.locked{opacity:0.4;pointer-events:none;}
.protip{background:rgba(255,255,255,0.1);padding:10px;border-left:4px solid gold;margin:10px 0;border-radius:6px;color:black;}
h2{margin-top:0;}
#leaderboard{background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;margin:20px;max-width:600px;}
.leader-row{display:flex;justify-content:space-between;padding:5px 10px;border-bottom:1px solid #ccc;transition:0.3s;}
.leader-row:nth-child(1){background:gold;color:black;font-weight:bold;}
.leader-row:nth-child(2){background:silver;color:black;font-weight:bold;}
.leader-row:nth-child(3){background:#cd7f32;color:white;font-weight:bold;}
#certificateCard{background:rgba(255,255,255,0.2);padding:20px;border-radius:12px;margin:20px;display:none;text-align:center;opacity:0;transform:scale(0.7);}
#certificateCard.show{animation:fadeIn 1s forwards;}
#certificateCard img{width:150px;margin:auto;display:block;}
#qrCode{margin:10px auto;display:block;}
@keyframes fadeIn{from{opacity:0;transform:scale(0.7);}to{opacity:1;transform:scale(1);}}
</style>
</head>
<body>

<header>
<h1>CODEON â€“ HTML & CSS Mastery</h1>
<p>Interactive course: edit code, run it, unlock lessons, earn points & badges!</p>
<p id="pointsDisplay">Points: 0</p>
</header>

<!-- LESSON 1 -->
<div class="card" id="lesson1">
<h2>Lesson 1 â€“ HTML Structure</h2>
<p><b>&lt;!DOCTYPE html&gt;</b> â€“ tells browser this is HTML5.</p>
<p><b>&lt;html&gt;</b> â€“ root of the page.</p>
<p><b>&lt;head&gt;</b> â€“ contains metadata, title, scripts.</p>
<p><b>&lt;title&gt;</b> â€“ page title shown on browser tab.</p>
<p><b>&lt;body&gt;</b> â€“ visible content.</p>
<p>Your task: Replace "Your Name" with your real name.</p>

<div class="protip">
<h3>ðŸ’¡ Tags Guide:</h3>
<ul>
<li>&lt;html&gt; â€“ Root of the page</li>
<li>&lt;head&gt; â€“ Metadata & title</li>
<li>&lt;title&gt; â€“ Page title</li>
<li>&lt;body&gt; â€“ Visible content</li>
<li>&lt;h1&gt; â€“ Main heading</li>
<li>&lt;p&gt; â€“ Paragraph</li>
</ul>
</div>

<div id="editor" class="editor-container"></div>
<button onclick="runCode()">Run Code</button>
<button onclick="checkLesson(1)">Submit Lesson 1</button>
<iframe id="output"></iframe>
<p id="status1"></p>
</div>

<!-- LESSON 2 -->
<div class="card locked" id="lesson2">
<h2>Lesson 2 â€“ Headings & Paragraphs</h2>
<p>Add headings & paragraphs to structure content.</p>
<div class="protip">
<h3>ðŸ’¡ Tags Guide:</h3>
<ul>
<li>&lt;h1&gt; to &lt;h6&gt; â€“ Headings</li>
<li>&lt;p&gt; â€“ Paragraph text</li>
<li>Use headings to organize content and improve SEO</li>
</ul>
</div>
<button onclick="unlockNext(2)">Unlock Lesson 2</button>
</div>

<!-- LESSON 3 -->
<div class="card locked" id="lesson3">
<h2>Lesson 3 â€“ Images</h2>
<p>Add <b>&lt;img&gt;</b> to display pictures.</p>
<div class="protip">
<h3>ðŸ’¡ Tags Guide:</h3>
<ul>
<li>&lt;img src="path" alt="description"&gt; â€“ insert images</li>
<li>Always include alt text for accessibility</li>
</ul>
</div>
<button onclick="unlockNext(3)">Unlock Lesson 3</button>
</div>

<!-- LESSON 4 -->
<div class="card locked" id="lesson4">
<h2>Lesson 4 â€“ Sections</h2>
<p>Use <b>&lt;section&gt;</b> or <b>&lt;div&gt;</b> to group content logically.</p>
<div class="protip">
<h3>ðŸ’¡ Tags Guide:</h3>
<ul>
<li>&lt;section&gt; â€“ logical block of content</li>
<li>&lt;div&gt; â€“ generic container</li>
<li>&lt;article&gt; â€“ self-contained content</li>
</ul>
</div>
<button onclick="unlockNext(4)">Unlock Lesson 4</button>
</div>

<!-- LESSON 5 -->
<div class="card locked" id="lesson5">
<h2>Lesson 5 â€“ Multi-page & Deployment</h2>
<p>Create <b>index.html</b> and <b>about.html</b>, link them with <b>&lt;a&gt;</b>.</p>
<div class="protip">
<h3>ðŸ’¡ Tags Guide:</h3>
<ul>
<li>&lt;a href="page.html"&gt; â€“ create links</li>
<li>&lt;link rel="stylesheet"&gt; â€“ link CSS files</li>
<li>&lt;nav&gt; â€“ navigation menu</li>
</ul>
<p>ðŸ’¡ Tip: Push projects to GitHub & deploy with GitHub Pages!</p>
</div>
<button onclick="unlockNext(5)">Unlock Lesson 5</button>
</div>

<!-- Certificate -->
<div id="certificateCard">
<img src="logo.png" alt="CODEON Logo">
<h2>ðŸŽ“ CODEON Completion Certificate</h2>
<p id="certName"></p>
<p id="certPoints"></p>
<p id="certID"></p>
<canvas id="qrCode"></canvas>
<p>Scan QR code to verify your certificate online!</p>
</div>

<!-- Leaderboard -->
<div id="leaderboard">
<h2>Leaderboard</h2>
<div id="leaderRows"></div>
</div>

<script>
// Student name from enrollment
let studentName = localStorage.getItem("studentName") || "Student Name";
let points = 0;

// Monaco Editor
require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs' }});
require(['vs/editor/editor.main'], function() {
window.editor = monaco.editor.create(document.getElementById('editor'), {
value: `<!DOCTYPE html>
<html>
<head>
<title>My First Website</title>
</head>
<body>
<h1>${studentName}</h1>
<p>I want to become a Developer.</p>
</body>
</html>`,
language: 'html',
theme: 'vs-dark'
});
});

// Run code
function runCode(){
const code = editor.getValue();
document.getElementById("output").srcdoc = code;
}

// Unlock next lesson
function unlockNext(num){
document.getElementById("lesson"+num).classList.remove("locked");
}

// Check lesson completion
function checkLesson(num){
if(num===1){
  const code = editor.getValue();
  if(code.includes("<h1>") && !code.includes("Your Name")){
    document.getElementById("status1").innerHTML="âœ… Lesson 1 Complete! Lesson 2 unlocked.";
    unlockNext(2);
    points+=10; updatePoints();
    showPaymentButton();
  } else {
    document.getElementById("status1").innerHTML="âŒ Please replace 'Your Name'.";
  }
}
}

// Update points display
function updatePoints(){
document.getElementById("pointsDisplay").innerText="Points: "+points;
}

// Generate unique certificate ID
function generateCertificateID() {
return 'CODEON-' + Math.floor(Math.random()*1000000);
}

// Payment & certificate
function showPaymentButton(){
const lastLesson = document.getElementById("lesson5");
if(!document.getElementById("paymentBtn")){
  const btn = document.createElement('button');
  btn.id="paymentBtn";
  btn.innerText="ðŸ’³ Pay & Generate Certificate";
  btn.onclick=function(){
    window.open("https://store.pesapal.com/certificatepayment","_blank");
    setTimeout(()=>{
      alert("Payment confirmed! Generating certificate...");
      generateCertificate(studentName);
    },3000);
  };
  lastLesson.appendChild(btn);
}
}

// Generate certificate
function generateCertificate(name){
const certCard = document.getElementById("certificateCard");
certCard.style.display="block";
certCard.classList.add("show");
document.getElementById("certName").innerText="Student Name: "+name;
document.getElementById("certPoints").innerText="Total Points: "+points;
document.getElementById("certID").innerText="Certificate ID: "+generateCertificateID();

// QR code
new QRious({
element: document.getElementById('qrCode'),
value:'https://codeonuganda.com/verify?student='+encodeURIComponent(name),
size:150
});

// Confetti
confetti({particleCount:150,spread:70,origin:{y:0.6}});
}

// Leaderboard
function loadLeaderboard(){
let fakeUsers = [
{name:"Alice",points:50},{name:"Bob",points:40},{name:"Charlie",points:30}
];
fakeUsers.push({name:studentName,points:points});
fakeUsers.sort((a,b)=>b.points-a.points);
let html = "";
fakeUsers.forEach((u,i)=>{
html += `<div class="leader-row">${i+1}. ${u.name} - ${u.points} pts</div>`;
});
document.getElementById("leaderRows").innerHTML = html;
}
setInterval(loadLeaderboard,2000);

</script>
</body>
</html>
