<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CODEON ‚Äì HTML & CSS Mastery</title>

<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js"></script>
<style>
body{margin:0;font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:white;transition:0.3s;}
header{background:#111;padding:20px;text-align:center;}
header h1{margin:0;font-size:2em;}
button{padding:10px 20px;background:gold;color:black;border:none;border-radius:6px;font-weight:bold;cursor:pointer;margin-top:10px;transition:0.3s;}
button:hover{background:orange;}
.editor-container{height:300px;width:100%;border-radius:6px;margin-top:10px;}
iframe{width:100%;height:250px;border:1px solid black;margin-top:10px;border-radius:6px;}
.card{background:rgba(255,255,255,0.08);padding:20px;border-radius:12px;margin:20px;transition:0.3s;}
.locked{opacity:0.4;pointer-events:none;}
.protip{background:rgba(255,255,255,0.1);padding:10px;border-left:4px solid gold;margin:10px 0;border-radius:6px;color:black;}
h2{margin-top:0;}
#badge{position:fixed;top:20px;right:20px;background:gold;color:black;padding:15px;border-radius:50%;font-weight:bold;font-size:1.5em;display:none;animation:pop 0.8s;}
@keyframes pop{0%{transform:scale(0);}60%{transform:scale(1.2);}100%{transform:scale(1);}}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:999;}
#leaderboard{background:rgba(0,0,0,0.2);border-radius:10px;padding:10px;margin:20px;max-width:600px;}
.leader-row{display:flex;justify-content:space-between;padding:5px 10px;border-bottom:1px solid #ccc;transition:0.3s;}
.leader-row:nth-child(1){background:gold;color:black;font-weight:bold;}
.leader-row:nth-child(2){background:silver;color:black;font-weight:bold;}
.leader-row:nth-child(3){background:#cd7f32;color:white;font-weight:bold;}
#certificateCard{background:rgba(255,255,255,0.2);padding:20px;border-radius:12px;margin:20px;display:none;}
</style>
</head>
<body>

<header>
<h1>CODEON ‚Äì HTML & CSS Mastery</h1>
<p>Interactive course: edit code, run it, unlock lessons, earn points & badges!</p>
<p id="pointsDisplay">Points: 0</p>
</header>

<canvas id="confetti"></canvas>
<div id="badge">üèÜ</div>

<!-- Lessons -->
<div id="lessonsContainer"></div>

<!-- Leaderboard -->
<div class="card" id="leaderboard">
<h2>üèÜ Leaderboard</h2>
<div id="leaderboardRows"></div>
</div>

<!-- Certificate -->
<div id="certificateCard">
<h2>üéì CODEON Completion Certificate</h2>
<p id="certName"></p>
<p id="certPoints"></p>
<p>Share your GitHub portfolio and show off your projects!</p>
</div>

<script>
// ======= INITIALIZATION =======
let points = 0;
const editors = {};
const lessonsData = [
  {title:"HTML Structure", task:"Replace 'Your Name' in the <h1> tag with your real name.", concept:"HTML is the skeleton of web pages. <!DOCTYPE html> declares HTML5. <html> is root. <head> has metadata. <body> has visible content.", tip:"üí° Monetization Tip: Start a portfolio on GitHub for your HTML projects."},
  {title:"Headings & Paragraphs", task:"Add an <h2> heading and a <p> paragraph.", concept:"Headings (<h1>-<h6>) organize titles. <p> is paragraph.", tip:"üí° Portfolio Tip: Each small project counts! Push to GitHub."},
  {title:"Images", task:"Add an <img> inside body.", concept:"Images engage users. Add alt text for accessibility.", tip:"üí° Monetization Tip: Practice creating landing pages for small businesses."},
  {title:"Sections & Layout", task:"Create a <section> with heading and paragraph.", concept:"Sections organize content. Each project goes in its own section.", tip:"üí° Portfolio Tip: Show structured layouts on your GitHub Pages site."},
  {title:"Multi-Page Website", task:"Make index.html and about.html and link them.", concept:"Link pages with <a href='about.html'>. Deploy on GitHub Pages.", tip:"üí° Monetization Tip: Freelance small websites for local clients."},
  {title:"Deployment & Monetization", task:"Deploy your site and write 1 monetization idea inside a paragraph.", concept:"Use GitHub Pages. Monetization: freelance, tutorials, ads, portfolio services.", tip:"üí° Portfolio Tip: Share deployed projects on LinkedIn & Twitter for visibility."}
];

// ======= CREATE LESSONS DYNAMICALLY =======
const container = document.getElementById('lessonsContainer');
lessonsData.forEach((l,i)=>{
  const lesson = document.createElement('section');
  lesson.className = 'card'+(i>0?' locked':'');
  lesson.id = 'lesson'+(i+1);
  lesson.innerHTML = `
    <h2>Lesson ${i+1} ‚Äì ${l.title}</h2>
    <div class="protip"><b>Concepts:</b> ${l.concept}</div>
    <p>Task: ${l.task}</p>
    <div id="editor${i+1}" class="editor-container"></div>
    <button onclick="runCode(${i+1})">Run Code</button>
    <button onclick="checkLesson(${i+1})">Submit Lesson ${i+1}</button>
    <p>Live Preview:</p>
    <iframe id="output${i+1}"></iframe>
    <p id="status${i+1}"></p>
    <div class="protip">${l.tip}<br>GitHub guide: <a href="https://github.com/join" target="_blank">Sign up</a>, push your code, enable Pages, share portfolio!</div>`;
  container.appendChild(lesson);
});

// ======= MONACO EDITOR =======
require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs' }});
require(['vs/editor/editor.main'], function () {
  for(let i=1;i<=lessonsData.length;i++){
    editors[i] = monaco.editor.create(document.getElementById('editor'+i), {
      value:`<!DOCTYPE html>
<html>
<head>
<title>Lesson ${i}</title>
</head>
<body>
<h1>Your Name</h1>
<p>Starter content for Lesson ${i}.</p>
</body>
</html>`,
      language:'html',
      theme:'vs-dark',
      automaticLayout:true
    });
  }
});

// ======= RUN CODE =======
function runCode(num){
  document.getElementById('output'+num).srcdoc = editors[num].getValue();
}

// ======= CONFETTI =======
function confettiBurst(){
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const particles = [];
  for(let i=0;i<200;i++){
    particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,dx:(Math.random()-0.5)*5,dy:Math.random()*-5-2,color:['#ff0','#f0f','#0ff','#0f0','#f00'][Math.floor(Math.random()*5)]});
  }
  function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      ctx.fillStyle=p.color;
      ctx.fillRect(p.x,p.y,5,5);
      p.x+=p.dx;p.y+=p.dy;
      if(p.y>canvas.height||p.x>canvas.width||p.x<0)p.x=Math.random()*canvas.width,p.y=0;
    });
    requestAnimationFrame(animate);
  }
  animate();
  setTimeout(()=>{ctx.clearRect(0,0,canvas.width,canvas.height);},3000);
}

// ======= BADGE =======
function showBadge(){
  const badge = document.getElementById('badge');
  badge.style.display='block';
  setTimeout(()=>{badge.style.display='none';},2000);
}

// ======= CHECK LESSON =======
function checkLesson(num){
  const code = editors[num].getValue().toLowerCase();
  const status = document.getElementById('status'+num);
  if(code.includes('<h1>') && !code.includes('your name')){
    points += 10;
    document.getElementById('pointsDisplay').innerText = 'Points: ' + points;
    status.innerHTML = `‚úÖ Lesson ${num} Complete! +10 points`;
    confettiBurst();
    showBadge();
    if(num<lessonsData.length){
      document.getElementById('lesson'+(num+1)).classList.remove('locked');
      document.getElementById('lesson'+(num+1)).scrollIntoView({behavior:'smooth'});
    } else {
      alert('üéâ All lessons complete! Push projects to GitHub and share your portfolio!');
      generateCertificate();
    }
    updateLeaderboard('Student', points);
  } else {
    status.innerHTML = '‚ùå Please replace "Your Name" in the <h1> tag.';
  }
}

// ======= LEADERBOARD =======
let leaderboardData = [];
function updateLeaderboard(name, pts){
  const existing = leaderboardData.find(u=>u.name===name);
  if(existing) existing.points=pts;
  else leaderboardData.push({name:name,points:pts});
  leaderboardData.sort((a,b)=>b.points-a.points);
  renderLeaderboard();
}

function renderLeaderboard(){
  const container = document.getElementById('leaderboardRows');
  container.innerHTML = '';
  leaderboardData.forEach((u,i)=>{
    const row = document.createElement('div');
    row.className='leader-row';
    row.innerHTML = `${i+1}. ${u.name} - ${u.points} pts`;
    container.appendChild(row);
  });
}

// ======= CERTIFICATE =======
function generateCertificate(){
  document.getElementById('certName').innerText = 'Student Name: You';
  document.getElementById('certPoints').innerText = 'Total Points: '+points;
  document.getElementById('certificateCard').style.display='block';
  document.getElementById('certificateCard').scrollIntoView({behavior:'smooth'});
}
</script>
</body>
</html>
