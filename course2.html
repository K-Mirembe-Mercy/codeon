<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Course 2 ‚Äì Interactive Projects | CODEON</title>

<!-- Monaco Editor -->
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js"></script>
<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{font-family:Arial;margin:0;background:#eef2f6;}
header{background:#004aad;color:white;padding:20px;text-align:center;}
.level, .lesson{background:white;max-width:1000px;margin:20px auto;padding:25px;border-radius:10px;box-shadow:0 3px 6px rgba(0,0,0,0.1);}
.locked{opacity:0.5;pointer-events:none;}
button{padding:10px 18px;background:#004aad;color:white;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:5px;}
button:hover{background:#00337a;}
#editor{height:450px;border:1px solid #ccc;margin-top:10px;border-radius:5px;width:100%;}
iframe{width:100%;height:300px;border:1px solid #ccc;margin-top:10px;border-radius:5px;}
.badge{display:none;margin-top:10px;padding:10px;background:#ffd700;color:black;font-weight:bold;border-radius:5px;text-align:center;}
.guidance{background:#f0f4f8;padding:15px;border-left:5px solid #004aad;margin-bottom:10px;}
.gitbtn{margin-top:10px;padding:8px 15px;background:#28a745;color:white;border:none;border-radius:5px;cursor:pointer;}
.gitbtn:hover{background:#1e7e34;}
.certificate-btn{background:#ff6600;color:white;margin-top:15px;}
.certificate-btn:hover{background:#e65c00;}
.confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;}
.protip{background:#e8f4ff;padding:10px;margin:10px 0;border-left:4px solid #2196F3;border-radius:5px;}
.protip h3{margin-top:0;}
</style>
</head>
<body>

<header>
<h1>Course 2 ‚Äì Interactive Projects</h1>
<p>Build, code, deploy, earn badges & certificates! Complete lessons to unlock the next.</p>
</header>

<div id="courseContainer"></div>

<!-- Pesapal iframe example (dynamic) -->
<div id="paymentContainer"></div>

<script>
// ======= Levels & Lessons =======
const levels = [
  {
    name:"Level 1 ‚Äì Event Registration Form",
    lessons:[
      {
        title:"HTML Form Structure",
        guidance:`<strong>Project:</strong> Build a form that collects Name, Email, and Event type.<br>
<strong>Allowed Tags:</strong> <code>&lt;form&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;label&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;button&gt;</code>.<br>
<strong>Rules:</strong> Must include all fields, labeled, submit button must exist.<br>
<strong>Tag Explanation:</strong>
<ul>
<li><code>&lt;form&gt;</code>: Wraps all input fields</li>
<li><code>&lt;input type="text/email"&gt;</code>: Text or email input</li>
<li><code>&lt;label for="id"&gt;</code>: Describes input</li>
<li><code>&lt;select&gt;</code>: Dropdown menu</li>
<li><code>&lt;button type="submit"&gt;</code>: Submit form</li>
</ul>
<strong>Tip:</strong> Use placeholders, link labels using <code>for</code>.`
      },
      {
        title:"JS Validation",
        guidance:`<strong>Project:</strong> Validate Name and Email.<br>
<strong>Allowed:</strong> JS DOM methods: getElementById, addEventListener.<br>
<strong>Rules:</strong> Show alert if fields empty, prevent page reload.<br>
<strong>Tag Explanation:</strong>
<ul>
<li><code>document.getElementById()</code>: Access DOM elements</li>
<li><code>addEventListener('submit', func)</code>: Run on submit</li>
<li><code>e.preventDefault()</code>: Prevent reload</li>
</ul>`
      },
      {
        title:"CSS Styling",
        guidance:`<strong>Project:</strong> Style your form.<br>
<strong>Rules:</strong> Layout neat, visible submit button.<br>
<strong>Tips:</strong> Use <code>class</code>/<code>id</code> selectors, <code>flex</code>, padding, margin, colors.`
      },
      {
        title:"Live Preview & Test",
        guidance:`<strong>Project:</strong> Test form & JS validation.<br>
<strong>Tips:</strong> Try empty/filled inputs, ensure alerts work.`
      },
      {
        title:"GitHub Deployment & Monetization",
        guidance:`<strong>Project:</strong> Push files to GitHub.<br>
<strong>Tips:</strong> 
<ul>
<li>Make repo public & deploy with GitHub Pages.</li>
<li>Document projects to attract clients.</li>
<li>Offer templates, freelance locally or online.</li>
<li>Showcase skills in portfolio to monetize.</li>
</ul>`
      }
    ]
  },
  {
    name:"Level 2 ‚Äì School Website",
    lessons:[
      {title:"Homepage Layout", guidance:`<strong>Project:</strong> Header, nav, main, footer.<br><strong>Tag Explanation:</strong> <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;main&gt;</code>, <code>&lt;footer&gt;</code>`},
      {title:"About Page", guidance:`<strong>Project:</strong> About section with <code>&lt;section&gt;</code>, paragraphs, <code>&lt;img&gt;</code>.`},
      {title:"Contact Page", guidance:`<strong>Project:</strong> Contact form with Name, Email, Message, <code>&lt;textarea&gt;</code>.`},
      {title:"CSS Styling & Responsive", guidance:`<strong>Project:</strong> Style using Flex/Grid & media queries.`},
      {title:"GitHub Deployment & Monetization", guidance:`<strong>Project:</strong> Push website to GitHub.<br><strong>Tip:</strong> Showcase portfolio online to earn clients.`}
    ]
  }
];

// ===== Build Levels Dynamically =====
const container=document.getElementById("courseContainer");
levels.forEach((level,li)=>{
  const levelDiv=document.createElement("div");
  levelDiv.className="level";
  if(li>0) levelDiv.classList.add("locked");
  levelDiv.id="level"+(li+1);
  levelDiv.innerHTML=`<h2>${level.name}</h2>
  <div class="guidance">Complete lessons to earn Level ${li+1} certificate (optional paid)</div>`;
  
  level.lessons.forEach((lesson,idx)=>{
    const lessonDiv=document.createElement("div");
    lessonDiv.className="lesson";
    if(idx>0) lessonDiv.classList.add("locked");
    lessonDiv.id=`level${li+1}-lesson${idx+1}`;
    lessonDiv.innerHTML=`
      <h3>Lesson ${idx+1} ‚Äì ${lesson.title}</h3>
      <div class="guidance">${lesson.guidance}</div>
      <div id="editor${li+1}-${idx+1}" style="height:400px;"></div>
      <button onclick="runCode('${li+1}-${idx+1}')">Run Code</button>
      <button onclick="submitLesson('${li+1}-${idx+1}')">Submit Lesson</button>
      <button class="gitbtn" onclick="deployGitHub('${li+1}-${idx+1}')">Deploy to GitHub</button>
      <iframe id="output${li+1}-${idx+1}"></iframe>
      <div class="badge" id="badge${li+1}-${idx+1}">üèÖ Badge Earned!</div>
    `;
    levelDiv.appendChild(lessonDiv);
  });

  // Certificate
  const certDiv=document.createElement("div");
  certDiv.className="lesson locked";
  certDiv.id=`level${li+1}-certificate`;
  certDiv.innerHTML=`
    <button class="certificate-btn" onclick="payCertificate(${li+1})">Get Level ${li+1} Certificate (Optional Paid)</button>
    <div class="badge" id="badge${li+1}">üéâ Level ${li+1} Completed!</div>
  `;
  levelDiv.appendChild(certDiv);

  container.appendChild(levelDiv);
});

// ===== Monaco Editor =====
require.config({paths:{vs:'https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs'}});
require(['vs/editor/editor.main'],function(){
  window.editors=[];
  levels.forEach((level,li)=>{
    level.lessons.forEach((lesson,idx)=>{
      const id=`${li+1}-${idx+1}`;
      window.editors[id]=monaco.editor.create(document.getElementById("editor"+id),{
        value:`<!-- Start coding here for ${lesson.title} -->`,
        language:'html',
        theme:'vs-dark'
      });
    });
  });
});

// ===== Functions =====
function runCode(id){document.getElementById("output"+id).srcdoc=editors[id].getValue();}

function submitLesson(id){
  const code=editors[id].getValue();
  if(!code.trim()){alert("Write code before submitting!"); return;}
  // Confetti celebration
  confetti({particleCount:50, spread:70, origin:{y:0.6}});
  setTimeout(()=>{document.querySelector('.confetti')?.remove();},3000);
  
  document.getElementById(`badge${id}`).style.display='block';
  alert(`Lesson ${id} submitted! üéâ`);
  
  const [level,lesson]=id.split('-').map(Number);
  const nextLessonEl=document.getElementById(`level${level}-lesson${lesson+1}`);
  if(nextLessonEl) nextLessonEl.classList.remove('locked');
  else document.getElementById(`level${level}-certificate`).classList.remove('locked');
}

function deployGitHub(id){
  alert(`Deploy lesson ${id} to GitHub. Create repo & push your files. Use GitHub Pages for live preview!`);
}

// Pesapal Payment
function payCertificate(level){
  const paymentURL=`https://store.pesapal.com/embed-code?pageUrl=https://store.pesapal.com/level${level}`;
  document.getElementById("paymentContainer").innerHTML=`
    <iframe src="${paymentURL}" width="400" height="60" frameborder="0" allowfullscreen></iframe>
  `;
  alert(`Payment window loaded. Complete payment to receive verified certificate.`);
}
</script>
</body>
</html>
